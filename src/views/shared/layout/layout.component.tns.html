<navbar-compat [title]="title">
  <action-item ios.position="right">
    <grid-layout>
      <grid-layout ripple (tap)="drawer.toggle()">
        <icon-compat [icon]="(drawer.visible | async) ? 'arrow-left' : 'bars'">
        </icon-compat>
      </grid-layout>
    </grid-layout>
  </action-item>
</navbar-compat>

<drawer-compat #drawer>
  <ng-template #drawerMain>
    <stack-layout>
      <loading-indicator></loading-indicator>
      <router-outlet></router-outlet>
    </stack-layout>
  </ng-template>
  <ng-template #drawerMenu>
    <scroll-view>
      <flexbox-layout>
        <image src="res://icon"></image>
        <stack-layout class="search">
          <icon-compat icon="search"></icon-compat>
          <text-field #input
            returnKeyType="search"
            (onLoaded)="input.blur()"
            (returnPress)="router.navigate(['/', input.text])">
          </text-field>
        </stack-layout>
        <stack-layout ripple
          [class.active]="router.url === '/'"
          (tap)="router.navigate(['/'])">
          <icon-compat icon="at"></icon-compat>
          <label [text]="title"></label>
        </stack-layout>
        <stack-layout ripple
          [class.active]="router.url.startsWith('/activities')"
          (tap)="router.navigate(['/activities'])">
          <icon-compat icon="map-marker-alt"></icon-compat>
          <i18n i18n="@@activities" unit="activities"></i18n>
        </stack-layout>
        <stack-layout ripple
          [class.active]="router.url.startsWith('/organisations')"
          (tap)="router.navigate(['/organisations'])">
          <icon-compat icon="globe-europe"></icon-compat>
          <i18n i18n="@@organisations" unit="organisations"></i18n>
        </stack-layout>
        <stack-layout ripple
          [class.active]="router.url.startsWith('/blogposts')"
          (tap)="router.navigate(['/blogposts'])">
          <icon-compat icon="comment-dots"></icon-compat>
          <i18n i18n="@@blogposts" unit="blogposts"></i18n>
        </stack-layout>
        <stack-layout ripple
          [class.active]="router.url.startsWith('/infopages')"
          (tap)="router.navigate(['/infopages'])">
          <icon-compat icon="question-circle"></icon-compat>
          <i18n i18n="@@infopages" unit="infopages"></i18n>
        </stack-layout>
        <!-- TODO: https://github.com/NativeScript/NativeScript/issues/6114 -->
        <label flexGrow="1"></label>
        <stack-layout ripple
          [class.active]="router.url.startsWith('/imprint')"
          (tap)="router.navigate(['/imprint'])">
          <icon-compat icon="paragraph"></icon-compat>
          <i18n i18n="@@imprint" unit="imprint"></i18n>
        </stack-layout>
        <stack-layout ripple
          [class.active]="router.url.startsWith('/policies')"
          (tap)="router.navigate(['/policies'])">
          <icon-compat icon="balance-scale"></icon-compat>
          <i18n i18n="@@policies" unit="policies"></i18n>
        </stack-layout>
      </flexbox-layout>
    </scroll-view>
  </ng-template>
</drawer-compat>

<mat-card *ngIf="activity">
	<form #activityForm="ngForm">
		<mat-horizontal-stepper linear #stepper="matHorizontalStepper" (selectionChange)="stepperValueChange($event)">

			<ng-template matStepperIcon="done">
				<fa-icon icon="check"></fa-icon>
			</ng-template>
			<ng-template matStepperIcon="edit">
				<fa-icon icon="check"></fa-icon>
			</ng-template>

			<mat-step [label]="constants.coreData" [stepControl]="baseDataFormGroup">
				<!--
        <form [formGroup]="baseDataFormGroup">
          <mat-grid-list cols="2" rowHeight="100px">
            <mat-grid-tile>
              <mat-form-field class="form-full-width">
                <input matInput required
                  formControlName="nameCtrl"
                  [placeholder]="constants.title"
                  [value]="activity.name">
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field class="form-full-width">
                <mat-select required
                  formControlName="providerCtrl"
                  [placeholder]="constants.organisation">
                  <mat-option *ngFor="let i of providers" [value]="i.id">
                    {{ i.organisation.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field class="form-full-width">
                <textarea matInput matTextareaAutosize
                  formControlName="descriptionCtrl"
                  placeholder="{{constants.description}}"
                  matAutosizeMaxRows="3"
                  matAutosizeMinRows="1"
                  [value]="activity.description">
                </textarea>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field class="form-full-width">
                <mat-select required
                  formControlName="categoryCtrl"
                  [placeholder]="constants.category">
                  <mat-option *ngFor="let i of categories" [value]="i.id">
                    {{ i.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field class="form-full-width tags-chip-list">
                <mat-chip-list #chipList>
                  <mat-chip *ngFor="let i of activity.tags" selectable removable
                    (remove)="removeTag(i)">
                    {{ i.name }}
                    <fa-icon matChipRemove icon="trash-alt"></fa-icon>
                  </mat-chip>
                  <input matChipInputAddOnBlur
                    [matChipInputFor]="chipList"
                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                    (matChipInputTokenEnd)="addTag($event)"
                    [placeholder]="constants.tags">
                </mat-chip-list>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-form-field class="form-full-width">
                <mat-select multiple
                  formControlName="targetGroupCtrl"
                  [placeholder]="constants.targetGroups">
                  <mat-option *ngFor="let i of targetGroups" [value]="i.id">
                    {{ i.name }}
                  </mat-option>
                </mat-select>
              </mat-form-field>
            </mat-grid-tile>
            <mat-grid-tile>
              <mat-checkbox formControlName="showUserCtrl">
                {{constants.publicUser}}
              </mat-checkbox>
            </mat-grid-tile>
          </mat-grid-list>
        </form>
				<mat-divider></mat-divider>
				<mat-grid-list cols="2" rowHeight="50px" style="margin-top: 24px;">
					<mat-grid-tile>
						<button disabled mat-button>{{ constants.previous }}</button>
					</mat-grid-tile>
					<mat-grid-tile>
						<button mat-button matStepperNext color="primary">
							{{ constants.next }}
						</button>
					</mat-grid-tile>
        </mat-grid-list>
-->
			</mat-step>
			<!--
				<mat-step [stepControl]="baseDataFormGroup">
					<form [formGroup]="baseDataFormGroup">
						<mat-card>
							<ng-template matStepLabel>{{constants.coreData}}</ng-template>
							<div>
								<h3>{{constants.coreData}}</h3>
								<div class="row">
									<div class="col">
										<mat-form-field class="form-full-width">
											<input matInput type="text" formControlName="nameCtrl" placeholder={{constants.title}} name="name" value={{activity.name}}
											 required id="activity_name_field">
										</mat-form-field>
										<mat-form-field class="form-full-width">
											<textarea matInput type="text" formControlName="descriptionCtrl" placeholder="{{constants.description}}" name="description"
											 value={{activity.description}} id="activity_description_field" matTextareaAutosize matAutosizeMinRows="2" matAutosizeMaxRows="5"></textarea>
										</mat-form-field>
										<mat-form-field class="form-full-width">
											<mat-select required placeholder={{constants.organisation}} formControlName="providerCtrl" name="activity_provider_id">
												<mat-option *ngFor="let provider of providers" [value]="provider.id">{{provider.organisation ? provider.organisation.name : ''}}</mat-option>
											</mat-select>
										</mat-form-field>
										<mat-checkbox *ngIf="activity.provider && activity.provider.organisation" formControlName="showUserCtrl" name="showUser">{{constants.publicUser}}</mat-checkbox>
									</div>
									<div class="col">
										<mat-form-field class="tags-chip-list form-full-width">
											<mat-chip-list #chipList>
												<mat-chip *ngFor="let tag of activity.tags" selectable="true" removable="true">
													{{tag.name + ' '}}
													<fa-icon (click)="removeTag(tag)" [icon]="faTrashAlt" style="color: red;">
													</fa-icon>
												</mat-chip>
												<input placeholder={{constants.tags}} [matChipInputFor]="chipList" [matChipInputSeparatorKeyCodes]="separatorKeysCodes" matChipInputAddOnBlur="true"
												 (matChipInputTokenEnd)="addTag($event)" />
											</mat-chip-list>
										</mat-form-field>
										<mat-form-field class="form-full-width">
											<mat-select required placeholder={{constants.category}} formControlName="categoryCtrl" name="activity_category">
												<mat-option *ngFor="let category of categories" [value]="category.id">{{category.name}}</mat-option>
											</mat-select>
										</mat-form-field>
										<mat-form-field class="form-full-width">
											<mat-select placeholder={{constants.targetGroups}} formControlName="targetGroupCtrl" name="activity_targetGroups" multiple>
												<mat-option *ngFor="let targetGroup of targetGroups" [value]="targetGroup.id">{{targetGroup.name}}</mat-option>
											</mat-select>
										</mat-form-field>
									</div>
								</div>
								<div>
									<button mat-button type="button" color="primary" matStepperNext>{{constants.next}}</button>
								</div>
							</div>
						</mat-card>
					</form>
				</mat-step>
-->
			<mat-step [label]="constants.translations">
				<translatable-form #translatableFieldsComponent [multiLingualObject]="activity" [translatableAttributes]="['name', 'description']">
				</translatable-form>
				<mat-divider></mat-divider>
				<mat-grid-list cols="2" rowHeight="50px" style="margin-top: 24px;">
					<mat-grid-tile>
						<button mat-button matStepperPrevious>
							{{ constants.previous }}
						</button>
					</mat-grid-tile>
					<mat-grid-tile>
						<button mat-button matStepperNext color="primary">
							{{ constants.next }}
						</button>
					</mat-grid-tile>
				</mat-grid-list>
			</mat-step>
			<!--
				<mat-step>
					<ng-template matStepLabel>{{constants.translations}}</ng-template>
					<translatable-form #translatableFieldsComponent [multiLingualObject]="activity" [translatableAttributes]="['name', 'description']"></translatable-form>
					<!-- <div *ngFor="let newTag of newTags">
						<div>{{newTag.name}}</div>
						<translatable-form #translatableTagsFieldsComponent [multiLingualObject]="newTag" [translatableAttributes]="['name']">
						</translatable-form>
					</div> --!>
					<div>
						<button mat-button type="button" matStepperPrevious>{{constants.previous}}</button>
						<button mat-button type="button" color="primary" matStepperNext>{{constants.next}}</button>
					</div>
				</mat-step>
-->
			<mat-step [label]="constants.address" [stepControl]="addressFormGroup">
				<!--
				<mat-grid-list cols="2" rowHeight="100px">
					<mat-grid-tile>
						<form [formGroup]="addressFormGroup" style="width: 100%;">
							<address-autocomplete-form *ngIf="addressFormGroup.invalid"
								#addressAutocompleteComponent
								[initialAddress]="activity.address">
							</address-autocomplete-form>
							<mat-form-field *ngIf="addressFormGroup.valid"
								class="form-full-width">
								<input disabled matInput
									[placeholder]="constants.address"
									[value]=
										"addressFormGroup.controls.addressCtrl.value.toString">
							</mat-form-field>
						</form>
					</mat-grid-tile>
					<mat-grid-tile *ngIf="addressFormGroup.valid">
						<button mat-raised-button color="primary" (click)="resetAddress()">
							{{ constants.change }}
						</button>
						<div style="width: 100%;"></div>
					</mat-grid-tile>
					<mat-grid-tile *ngIf="addressFormGroup.invalid">
						<button mat-raised-button color="primary" (click)="addressSubmit()">
							{{ constants.ok }}
						</button>
						<div style="width: 100%;"></div>
					</mat-grid-tile>
				</mat-grid-list>
				<mat-divider></mat-divider>
				<mat-grid-list cols="2" rowHeight="50px" style="margin-top: 24px;">
					<mat-grid-tile>
						<button mat-button matStepperPrevious>
							{{ constants.previous }}
						</button>
					</mat-grid-tile>
					<mat-grid-tile>
						<button mat-button matStepperNext color="primary"
							[disabled]="addressFormGroup.invalid">
							{{ constants.next }}
						</button>
					</mat-grid-tile>
        </mat-grid-list>
-->
			</mat-step>
			<!--
				<mat-step [stepControl]="addressFormGroup">
					<ng-template matStepLabel>{{constants.address}}</ng-template>
					<div>
						<h3>{{constants.placeQuestion}}</h3>
						<form [formGroup]="addressFormGroup">
							<mat-card class="address-card" *ngIf="activity.address">
								<div *ngIf="addressFormGroup.invalid">
									<address-autocomplete-form #addressAutocompleteComponent [initialAddress]="activity.address"></address-autocomplete-form>
								</div>
								<div *ngIf="!addressFormGroup.invalid">
									{{addressFormGroup.controls.addressCtrl.value.toString}}
									<button mat-button color="primary" type="button" (click)="resetAddress()">{{constants.change}}</button>
								</div>
							</mat-card>
							<div>
								<button mat-button type="button" matStepperPrevious>{{constants.previous}}</button>
								<button mat-button color="primary" type="button" [disabled]="addressFormGroup.invalid" matStepperNext>{{constants.next}}</button>
								<button mat-button color="primary" type="button" *ngIf="addressFormGroup.invalid" (click)="addressSubmit()">{{constants.ok}}</button>
							</div>
						</form>
					</div>
				</mat-step>
-->
			<mat-step [label]="constants.dates" [stepControl]="schedulesFormGroup">
				<!-- <ng-template matStepLabel>{{constants.dates}}</ng-template> -->
				<scheduler-component-form #schedulerComponent [schedules]="activity.schedules" (onScheduleChange)="onScheduleChange($event)"></scheduler-component-form>
				<div *ngIf="!schedulesFormGroup.invalid">
					<button mat-button type="button" matStepperPrevious>{{constants.previous}}</button>
					<button mat-button color="primary" type="button" [disabled]="schedulesFormGroup.invalid" matStepperNext>{{constants.next}}</button>
				</div>
			</mat-step>
			<mat-step [label]="constants.summary">
				<!-- <ng-template matStepLabel>{{constants.summary}}</ng-template> -->
				<div>{{constants.pleaseControl}}</div>
				<mat-tab-group>
					<mat-tab label="{{constants.coreData}}">
						<activity-detail *ngIf="activity && user" [activity]="activity"></activity-detail>
						<div>
							<button mat-button type="button" matStepperPrevious>{{constants.previous}}</button>
							<button mat-button color="primary" (click)="onSubmit()">{{constants.save}}</button>
						</div>
					</mat-tab>
					<mat-tab label="{{constants.translations}}">
						<translatable-form #translatableFieldsComponent [multiLingualObject]="activity" [translatableAttributes]="['name', 'description']"
						 [disabled]="true"></translatable-form>
					</mat-tab>
				</mat-tab-group>
			</mat-step>
		</mat-horizontal-stepper>
		<!-- <button mat-button color="warn" type="button" (click)="back()">{{constants.cancel}}</button> -->
	</form>
</mat-card>
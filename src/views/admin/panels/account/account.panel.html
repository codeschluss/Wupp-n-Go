<mat-toolbar color="primary">
  <h2><i18n i18n="@@accountPanel">accountPanel</i18n></h2>
  <h1>{{ group?.get('name')?.value || '...' }}</h1>
</mat-toolbar>

<mat-tab-group [selectedIndex]="index">
  <mat-tab id="details" [disabled]="!user">
    <ng-template matTabLabel>
      <i18n i18n="@@userDetails">userDetails</i18n>
    </ng-template>
    <ng-template matTabContent>
      <user-form #form [group]="group" [item]="user"></user-form>
      <mat-divider></mat-divider>
      <button mat-button color="primary" [disabled]="!form.valid"
        (click)="persist()">
        <i18n i18n="@@persist">persist</i18n>
      </button>
    </ng-template>
  </mat-tab>

  <mat-tab id="organisations" [disabled]="!organisations.length">
    <ng-template matTabLabel>
      <i18n i18n="@@userOrganisations">userOrganisations</i18n>
      <button mat-icon-button color="primary" (click)="apply()">
        <fa-icon icon="sign-in-alt"></fa-icon>
      </button>
      <button mat-icon-button color="primary" (click)="create('organisation')">
        <fa-icon icon="plus-square"></fa-icon>
      </button>
    </ng-template>
    <ng-template matTabContent>
      <organisation-table [items]="organisations">
        <ng-container matColumnDef="approved">
          <mat-header-cell *matHeaderCellDef>
            <i18n i18n="@@approved">approved</i18n>
          </mat-header-cell>
          <mat-cell *matCellDef="let item">
            <mat-slide-toggle disabled [checked]="approved(item)">
            </mat-slide-toggle>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="admin">
          <mat-header-cell *matHeaderCellDef>
            <i18n i18n="@@admin">admin</i18n>
          </mat-header-cell>
          <mat-cell *matCellDef="let item">
            <mat-slide-toggle disabled [checked]="admin(item)">
            </mat-slide-toggle>
          </mat-cell>
        </ng-container>
        <ng-container matColumnDef="actions">
          <mat-header-cell *matHeaderCellDef>
            <i18n i18n="@@actions">actions</i18n>
          </mat-header-cell>
          <mat-cell *matCellDef="let item">
            <button mat-icon-button color="warn" (click)="demoteUser(item)">
              <fa-icon icon="sign-out-alt"></fa-icon>
            </button>
          </mat-cell>
        </ng-container>
      </organisation-table>
    </ng-template>
  </mat-tab>

  <mat-tab id="activities" [disabled]="!activities.length">
    <ng-template matTabLabel>
      <i18n i18n="@@userActivities">userActivities</i18n>
        <button mat-icon-button color="primary" [disabled]="!provider"
          (click)="create('activity')">
          <fa-icon icon="plus-square"></fa-icon>
        </button>
    </ng-template>
    <ng-template matTabContent>
      <activity-table [items]="activities">
        <ng-container matColumnDef="actions">
          <mat-header-cell *matHeaderCellDef>
            <i18n i18n="@@actions">actions</i18n>
          </mat-header-cell>
          <mat-cell *matCellDef="let item">
            <button mat-icon-button (click)="update(item)">
              <fa-icon icon="pen"></fa-icon>
            </button>
            <button mat-icon-button color="warn" (click)="delete(item)">
              <fa-icon icon="trash"></fa-icon>
            </button>
          </mat-cell>
        </ng-container>
      </activity-table>
    </ng-template>
  </mat-tab>
</mat-tab-group>

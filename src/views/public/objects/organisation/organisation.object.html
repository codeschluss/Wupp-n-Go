<main>
  <h2 class="mat-headline">
    {{ item.name }}
    <small>
      <i18n i18n="@@at">at</i18n>
      <a
        [queryParams]="{ suburbs: item.address.suburb.id }"
        [routerLink]="['/', 'activities']">
        {{ item.address.place }} {{ item.address.suburb.name }}
      </a>
    </small>
  </h2>
  <mat-divider></mat-divider>
  <nav>
    <share-piece [item]="item"></share-piece>
    <like-piece [item]="item"></like-piece>
    <span [style.flexGrow]="1"></span>
    <button mat-button disabled>
      <icon-compat icon="clock"></icon-compat>
      <time [datetime]="item.created">
        {{ item.created | date: 'dd.MM.yyyy' }}
      </time>
    </button>
  </nav>
  <mat-divider></mat-divider>
  <section>
    <ngx-md class="mat-body" [data]="item.description"></ngx-md>
    <aside>
      <ng-container *ngIf="item.activities">
        <expand-compat #activities (changed)="$event && expanded(activities)">
          <ng-template #expandHeader>
            <icon-compat icon="map-marker-alt"></icon-compat>
            <i18n i18n="@@activities">activities</i18n>
            <small>({{ item.activities.length }})</small>
          </ng-template>
          <ng-template #expandContent>
            <ng-container *ngFor="let activity of item.activities">
              <activity-card [item]="activity"></activity-card>
            </ng-container>
          </ng-template>
        </expand-compat>
      </ng-container>
      <ng-container *ngIf="item.images">
        <expand-compat #images (changed)="$event && expanded(images)">
          <ng-template #expandHeader>
            <icon-compat icon="image"></icon-compat>
            <i18n i18n="@@images">images</i18n>
            <small>({{ item.images.length }})</small>
          </ng-template>
          <ng-template #expandContent>
            <ng-container *ngFor="let image of item.images">
              <figure>
                <content
                  [alt]="image.caption"
                  [style.backgroundImage]="image.source"
                  [title]="image.caption">
                </content>
              </figure>
            </ng-container>
          </ng-template>
        </expand-compat>
      </ng-container>
    </aside>
  </section>
</main>
